import { useState, useEffect } from 'react';
import { Card, CardContent } from '@/components/ui/card';
import { Input } from '@/components/ui/input';
import { Label } from '@/components/ui/label';

export default function TorsionalIrregularityChecker() {
  const [length, setLength] = useState(30);
  const [width, setWidth] = useState(40);
  const [height, setHeight] = useState(45);
  const [zone, setZone] = useState(3);
  const [soilType, setSoilType] = useState('II');
  const [displacements, setDisplacements] = useState({ d1: 10, d2: 14 });

  const bX = width;
  const bY = length;

  const accEccX = 0.05 * bX;
  const accEccY = 0.05 * bY;

  const deltaMax = Math.max(displacements.d1, displacements.d2);
  const deltaAvg = (displacements.d1 + displacements.d2) / 2;

  const torsionRatio = (deltaMax / deltaAvg).toFixed(2);

  const irregularityStatus = torsionRatio > 1.4 ? 'Extreme Torsional Irregularity' : torsionRatio > 1.2 ? 'Torsional Irregularity' : 'No Irregularity';

  return (
    <div className="grid gap-6 p-4">
      <h1 className="text-3xl font-bold text-center">Torsional Irregularity Check</h1>

      <Card>
        <CardContent className="grid gap-4 p-4">
          <Label>Length (X-direction) [m]</Label>
          <Input type="number" value={length} onChange={(e) => setLength(+e.target.value)} />

          <Label>Width (Y-direction) [m]</Label>
          <Input type="number" value={width} onChange={(e) => setWidth(+e.target.value)} />

          <Label>Height [m]</Label>
          <Input type="number" value={height} onChange={(e) => setHeight(+e.target.value)} />

          <Label>Seismic Zone (II to V)</Label>
          <Input type="number" value={zone} onChange={(e) => setZone(+e.target.value)} />

          <Label>Soil Type (I / II / III)</Label>
          <Input value={soilType} onChange={(e) => setSoilType(e.target.value)} />
        </CardContent>
      </Card>

      <Card>
        <CardContent className="grid gap-4 p-4">
          <h2 className="text-xl font-semibold">Stepwise Output:</h2>
          <p>Accidental Eccentricity X: ±{accEccX} m</p>
          <p>Accidental Eccentricity Y: ±{accEccY} m</p>

          <p>Maximum Displacement: {deltaMax} mm</p>
          <p>Average Displacement: {deltaAvg} mm</p>
          <p>Torsion Ratio: {torsionRatio}</p>
          <p className="font-bold text-lg">Status: {irregularityStatus}</p>
        </CardContent>
      </Card>
    </div>
  );
}
